@model HungApple.Models.Category

@{
	ViewData["Title"] = "Xóa";
	Layout = "_AdminPanel";
}

<h3><strong>XÓA DANH MỤC</strong></h3>
<div>
	<hr />
	<dl>
		<dd class="col-sm-10">
			<h4>
				<strong>@Html.DisplayNameFor(model => model.Name)</strong>:
				@Html.DisplayFor(model => model.Name)
			</h4>
		</dd>
	</dl>

	<form asp-action="CategoriesDelete" onsubmit="deleteFunction(event)" id="deleteForm">
		<input type="hidden" asp-for="Id" />
		<button type="submit" class="w3-button w3-blue w3-round">Xóa</button>
		<a asp-action="CategoriesIndex" class="w3-button w3-blue w3-round" style="text-decoration:none;">Trở về</a>
	</form>
</div>
<script>
	function deleteFunction(e) {
		e.preventDefault();
		Swal.fire({
			title: "Bạn có muốn xóa?",
			text: "Bạn không hoàn lại điều này!",
			icon: "warning",
			showCancelButton: true,
			confirmButtonColor: "#3085d6",
			cancelButtonColor: "#d33",
			confirmButtonText: "Xác nhận xóa",
			cancelButtonText: "Hủy bỏ"
		}).then((result) => {
			if (result.isConfirmed) {
				const deleteForm = document.getElementById('deleteForm');
				deleteForm.submit();
				Swal.fire({
					title: "Đã xóa danh mục!",
					icon: "success",
					showConfirmButton: false
				});
			}
			else {
				Swal.fire({
					title: "Đã hủy!",
					icon: "error",
					showConfirmButton: false
				});
				setTimeout(function () {
					window.location.href = '/Admin/CategoriesIndex';
				}, 1500);
			}
		});
	}
</script>